apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-configuration
  namespace: helpme
  labels:
    app: nginx-ingress
data:
  # Timeouts
  proxy-connect-timeout: "60"
  proxy-send-timeout: "60"
  proxy-read-timeout: "60"
  
  # Body size
  proxy-body-size: "50m"
  client-max-body-size: "50m"
  
  # Buffers
  proxy-buffer-size: "16k"
  proxy-buffers-number: "4"
  
  # Rate limiting
  limit-req-status-code: "429"
  limit-conn-status-code: "429"
  
  # SSL
  ssl-protocols: "TLSv1.2 TLSv1.3"
  ssl-ciphers: "ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384"
  ssl-prefer-server-ciphers: "true"
  
  # Logs
  log-format-upstream: '$remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent" $request_length $request_time [$proxy_upstream_name] [$proxy_alternative_upstream_name] $upstream_addr $upstream_response_length $upstream_response_time $upstream_status $req_id'
  
  # CORS (se necess√°rio)
  enable-cors: "true"
  cors-allow-methods: "GET, POST, PUT, PATCH, DELETE, OPTIONS"
  cors-allow-headers: "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization"